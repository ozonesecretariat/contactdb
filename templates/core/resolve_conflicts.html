{% extends 'base.html' %}

{% load static %}

{% block extra_css %}
     <link rel="stylesheet" href="{% static 'resolve_conflicts.css' %}">
{% endblock %}

{% block title %}
    Resolve conflicts
{% endblock %}

{% block content %}
    <div class="bg-white rounded shadow p-5">
        <div class="d-grid gap-3 d-md-flex flex-wrap justify-content-md-between align-items-md-center mb-5">
            <div class="fs-2">
                Resolve conflicts
            </div>
            <div class="d-grid gap-3 d-md-flex justify-content-md-end">
                <button class="btn btn-main-color" onclick="openDialogAllConflicts('keep_old_data')">Keep old data for all</button>

                <button class="btn btn-secondary" onclick="openDialogAllConflicts('save_incoming_data')">Save incoming data for all</button>
            </div>
        </div>

        <div class="list-container" data-page="{{ page_obj.number }}">
            {% for conflict in object_list %}
                <div class="border rounded my-4 " id="id_container_{{ conflict.id }}">
                        <div class="overflow-scroll">
                            <div class="inner-container">
                                <div class="d-grid rounded-top overflow-hidden" style="grid-template-columns: 50% 50%">
                                    <div class="main-color-light border-end border-bottom p-2">
                                        <div class="mx-2 fw-bold">{{ conflict.record }} <span class="text-muted fst-italic fs-09">(old data)</span></div>
                                    </div>
                                    <div class=" p-2 border-bottom">
                                        <div class="mx-2 fw-bold">{{ conflict }} <span class="text-muted fst-italic fs-09">(incoming data)</span></div>
                                    </div>
                                </div>

                                <div class="collapse" id="id_collapse_{{ conflict.id }}">
                                    <div class="d-grid border-bottom rounded-bottom overflow-hidden" style="grid-template-columns: 50% 50%">
                                        <div class="main-color-light border-end p-2">
                                            <div class="mx-2">

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Contact id
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.contact_id != conflict.contact_id %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.contact_id %}
                                                                {{ conflict.record.contact_id }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Title
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.title != conflict.title %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.title %}
                                                                {{ conflict.record.title }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                            Honorific
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.honorific != conflict.honorific %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.honorific %}
                                                                {{ conflict.record.honorific }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Respectful
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.respectful != conflict.respectful %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.respectful %}
                                                                {{ conflict.record.respectful }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>


                                                    <div class="my-2">
                                                        <div class="label">
                                                           First name
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.first_name != conflict.first_name %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.first_name %}
                                                                {{ conflict.record.first_name }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Last name
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.last_name != conflict.last_name %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.last_name %}
                                                                {{ conflict.record.last_name }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Designation
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.designation != conflict.designation %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.designation %}
                                                                {{ conflict.record.designation }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Department
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.department != conflict.department %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.department %}
                                                                {{ conflict.record.department }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Affiliation
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.affiliation != conflict.affiliation %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.affiliation %}
                                                                {{ conflict.record.affiliation }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Organization
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.organization != conflict.organization %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.organization %}
                                                                {{ conflict.record.organization }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Primary language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.primary_language != conflict.primary_language %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.primary_language %}
                                                                {{ conflict.record.primary_language }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Second language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.second_language != conflict.second_language %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.second_language %}
                                                                {{ conflict.record.second_language }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Third language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.third_langauge != conflict.third_langauge %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.third_langauge %}
                                                                {{ conflict.record.third_langauge }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Phones
                                                        </div>
                                                        <div>
                                                            {% if conflict.record.phones|length > 0 %}
                                                                {% for phone in conflict.record.phones %}
                                                                    <div class="fw-bold {% if phone not in conflict.phones %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ phone }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.phones|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Mobiles
                                                        </div>
                                                        <div>
                                                            {% if conflict.record.mobiles|length > 0 %}
                                                                {% for mobile in conflict.record.mobiles %}
                                                                    <div class="fw-bold {% if mobile not in conflict.mobiles %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ mobile }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.mobiles|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Faxes
                                                        </div>
                                                        <div>
                                                            {% if conflict.record.faxes|length > 0 %}
                                                                {% for fax in conflict.record.faxes %}
                                                                    <div class="fw-bold {% if fax not in conflict.faxes %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ fax }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.faxes|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Emails
                                                        </div>
                                                        <div>
                                                            {% if conflict.record.emails|length > 0 %}
                                                                {% for email in conflict.record.emails %}
                                                                    <div class="fw-bold {% if email not in conflict.emails %} text-danger {% else %} text-success{% endif %}">
                                                                        {{ email }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.emails|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Email Ccs
                                                        </div>
                                                        <div>
                                                            {% if conflict.record.email_ccs|length > 0 %}
                                                                {% for email_cc in conflict.record.email_ccs %}
                                                                    <div class="fw-bold {% if email_cc not in conflict.email_ccs %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ email_cc }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.email_ccs|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Notes
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.notes != conflict.notes %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.notes %}
                                                                {{ conflict.record.notes }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Is mailing list
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.is_mailing_list != conflict.is_mailing_list %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.is_mailing_list %}
                                                                {{ conflict.record.is_mailing_list }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Is use organization address
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.is_use_organization_address != conflict.is_use_organization_address %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.is_use_organization_address %}
                                                                {{ conflict.record.is_use_organization_address }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Address
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.address != conflict.address %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.address %}
                                                                {{ conflict.record.address }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           City
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.city != conflict.city %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.city %}
                                                                {{ conflict.record.city }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           State
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.state != conflict.state %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.state %}
                                                                {{ conflict.record.state }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Country
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.country != conflict.country %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.country %}
                                                                {{ conflict.record.country }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                       <div class="label">
                                                           Postal code
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.postal_code != conflict.postal_code %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.postal_code %}
                                                                {{ conflict.record.postal_code }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Birth date
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.birth_date != conflict.birth_date %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.birth_date %}
                                                                {{ conflict.record.birth_date }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Focal point
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.focal_point != conflict.focal_point %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.focal_point %}
                                                                {{ conflict.record.focal_point }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Head of organization
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.head_of_organization != conflict.head_of_organization %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.record.head_of_organization %}
                                                                {{ conflict.record.head_of_organization }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                </div>
                                        </div>
                                        <div class="p-2">
                                            <div class="mx-2">

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Contact id
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.contact_id != conflict.contact_id %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.contact_id %}
                                                                {{ conflict.contact_id }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Title
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.title != conflict.title %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.title %}
                                                                {{ conflict.title }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                            Honorific
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.honorific != conflict.honorific %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.honorific %}
                                                                {{ conflict.honorific }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Respectful
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.respectful != conflict.respectful %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.respectful %}
                                                                {{ conflict.respectful }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>


                                                    <div class="my-2">
                                                        <div class="label">
                                                           First name
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.first_name != conflict.first_name %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.first_name %}
                                                                {{ conflict.first_name }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Last name
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.last_name != conflict.last_name %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.last_name %}
                                                                {{ conflict.last_name }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Designation
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.designation != conflict.designation %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.designation %}
                                                                {{ conflict.designation }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Department
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.department != conflict.department %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.department %}
                                                                {{ conflict.department }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Affiliation
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.affiliation != conflict.affiliation %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.affiliation %}
                                                                {{ conflict.affiliation }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Organization
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.organization != conflict.organization %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.organization %}
                                                                {{ conflict.organization }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Primary language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.primary_language != conflict.primary_language %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.primary_language %}
                                                                {{ conflict.primary_language }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Second language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.second_language != conflict.second_language %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.second_language %}
                                                                {{ conflict.second_language }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Third language
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.third_langauge != conflict.third_langauge %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.third_langauge %}
                                                                {{ conflict.third_langauge }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Phones
                                                        </div>
                                                        <div>
                                                            {% if conflict.phones|length > 0 %}
                                                                {% for phone in conflict.phones %}
                                                                    <div class="fw-bold {% if phone not in conflict.record.phones %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ phone }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.record.phones|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Mobiles
                                                        </div>
                                                        <div>
                                                            {% if conflict.mobiles|length > 0 %}
                                                                {% for mobile in conflict.mobiles %}
                                                                    <div class="fw-bold {% if mobile not in conflict.record.mobiles %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ mobile }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.record.mobiles|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Faxes
                                                        </div>
                                                        <div>
                                                            {% if conflict.faxes|length > 0 %}
                                                                {% for fax in conflict.faxes %}
                                                                    <div class="fw-bold {% if fax not in conflict.record.faxes %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ fax }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.record.faxes|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Emails
                                                        </div>
                                                        <div>
                                                            {% if conflict.emails|length > 0 %}
                                                                {% for email in conflict.emails %}
                                                                    <div class="fw-bold {% if email not in conflict.record.emails %} text-danger {% else %} text-success{% endif %}">
                                                                        {{ email }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.record.emails|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Email Ccs
                                                        </div>
                                                        <div>
                                                            {% if conflict.email_ccs|length > 0 %}
                                                                {% for email_cc in conflict.email_ccs %}
                                                                    <div class="fw-bold {% if email_cc not in conflict.record.email_ccs %} text-danger {% else %} text-success {% endif %}">
                                                                        {{ email_cc }}
                                                                    </div>
                                                                {% endfor %}
                                                            {% else %}
                                                                <span class="fw-bold fst-italic {% if conflict.record.email_ccs|length > 0 %} text-danger {% else %} text-success {% endif %}">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Notes
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.notes != conflict.notes %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.notes %}
                                                                {{ conflict.notes }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Is mailing list
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.is_mailing_list != conflict.is_mailing_list %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.is_mailing_list %}
                                                                {{ conflict.is_mailing_list }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Is use organization address
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.is_use_organization_address != conflict.is_use_organization_address %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.is_use_organization_address %}
                                                                {{ conflict.is_use_organization_address }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Address
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.address != conflict.address %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.address %}
                                                                {{ conflict.address }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           City
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.city != conflict.city %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.city %}
                                                                {{ conflict.city }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           State
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.state != conflict.state %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.state %}
                                                                {{ conflict.state }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Country
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.country != conflict.country %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.country %}
                                                                {{ conflict.country }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                       <div class="label">
                                                           Postal code
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.postal_code != conflict.postal_code %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.postal_code %}
                                                                {{ conflict.postal_code }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Birth date
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.birth_date != conflict.birth_date %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.birth_date %}
                                                                {{ conflict.birth_date }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Focal point
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.focal_point != conflict.focal_point %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.focal_point %}
                                                                {{ conflict.focal_point }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <div class="my-2">
                                                        <div class="label">
                                                           Head of organization
                                                        </div>
                                                        <div class="fw-bold {% if conflict.record.head_of_organization != conflict.head_of_organization %} text-danger {% else %} text-success {% endif %}">
                                                            {% if conflict.head_of_organization %}
                                                                {{ conflict.head_of_organization }}
                                                            {% else %}
                                                                <span class="fst-italic">None</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="d-grid gap-3 p-2 d-md-flex justify-content-md-between">
                            <button class="btn btn-main-color" onclick="openDialog('keep_old_data', {{ conflict.id }})">Keep old data</button>
                            <button class="btn btn-light text-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#id_collapse_{{ conflict.id }}" aria-expanded="false" aria-controls="id_collapse_{{ conflict.id }}" onclick="scrollToElement('id_container_{{ conflict.id }}')">
                                        <span class="text-collapsed">Show details</span>
                                        <span class="text-expanded">Hide details</span>
                                    </button>
                            <button class="btn btn-secondary" onclick="openDialog('save_incoming_data', {{ conflict.id }})">Save incoming data</button>
                        </div>

                    </div>
            {% endfor %}

            <div class="progress my-4">
                <div class="indeterminate"></div>
            </div>

            {% if paginator.num_pages > 1 %}
                <nav class="fit-content mx-auto">
                    <ul class="pagination">
                        {% if page_obj.has_previous %}
                            <li class="page-item">
                                <a class="page-link text-main-color" role="button"
                                   hx-target="div.list-container"
                                   hx-trigger="click"
                                   hx-indicator=".progress"
                                   hx-get="{% url 'conflict-resolution' %}?page={{ page_obj.previous_page_number }}"
                                   hx-swap="outerHTML">Previous</a>
                            </li>
                        {% endif %}
                        {% for i in pagination_range %}
                            <li class="page-item">
                                {% if page_obj.number == i %}
                                    <a class="page-link active">{{ i }}</a>
                                {% else %}
                                    <a class="page-link text-main-color" {% if i != paginator.ELLIPSIS %}role="button"
                                       hx-target="div.list-container"
                                       hx-trigger="click"
                                       hx-indicator=".progress"
                                       hx-get="{% url 'conflict-resolution' %}?page={{ i }}"
                                       hx-swap="outerHTML"{% endif %}>{{ i }}</a>
                                {% endif %}
                            </li>

                        {% endfor %}
                        {% if page_obj.has_next %}
                            <li class="page-item">
                                <a class="page-link text-main-color" role="button"
                                   hx-target="div.list-container"
                                   hx-trigger="click"
                                   hx-indicator=".progress"
                                   hx-get="{% url 'conflict-resolution' %}?page={{ page_obj.next_page_number }}"
                                   hx-swap="outerHTML">Next</a>
                            </li>
                        {% endif %}
                    </ul>
                </nav>
            {% endif %}
        </div>
    </div>

    <dialog id="myDialog" class="rounded-2 shadow">
        <div class="resolve-conflicts"
        >
        </div>
    </dialog>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/htmx.min.js' %}" defer></script>
    <script src="{% static 'js/resolve_conflicts.js' %}"></script>
    <script>
        function openDialog(method, conflict) {
          var dialog = document.getElementById("myDialog");
          htmx.ajax('GET', "{% url 'resolve-conflict' %}?method="+method+"&conflict="+conflict, 'div.resolve-conflicts');

          dialog.showModal();
        }

        function closeDialog() {
          var dialog = document.getElementById("myDialog");
          resolve_conflicts = document.getElementsByClassName("resolve-conflicts")[0];
          resolve_conflicts.innerHTML = "";
          dialog.close();
        }

        function endDialog() {
            closeDialog();
            list_container = document.getElementsByClassName("list-container")[0];
            page_number = list_container.dataset.page;
            htmx.ajax('GET', "{% url 'conflict-resolution' %}?page=" + page_number, 'div.list-container');

        }

        function openDialogAllConflicts(method){
            var dialog = document.getElementById("myDialog");
            htmx.ajax('GET', "{% url 'resolve-all-conflicts' %}?method="+method, 'div.resolve-conflicts');

            dialog.showModal();
        }

        function endDialogAllConflicts() {
            closeDialog();
            list_container = document.getElementsByClassName("list-container")[0];
            page_number = list_container.dataset.page;
            htmx.ajax('GET', "{% url 'conflict-resolution' %}?page=" + page_number, 'div.list-container');

        }
    </script>
{% endblock %}



